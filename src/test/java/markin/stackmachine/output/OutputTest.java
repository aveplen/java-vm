package markin.stackmachine.output;

import static org.junit.Assert.*;

import org.junit.Test;

public class OutputTest {

  private final int[] stack = new int[]{
      1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16
  };

  private final int[] instructions = new int[]{
      1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16
  };

  private final int[] data = new int[]{
      1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16
  };

  private final int counterReg = 10;

  private final int stackPtr = 15;

  private final int instructionPtr = 20;

  private final boolean running = true;

  private final String expected = """
      Instruction space
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
      |   | +0 | +1 | +2 | +3 | +4 | +5 | +6 | +7 | +8 | +9 | +10 | +11 | +12 | +13 | +14 | +15 |
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
      | 0 | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11  | 12  | 13  | 14  | 15  | 16  |
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
            
      Data space
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
      |   | +0 | +1 | +2 | +3 | +4 | +5 | +6 | +7 | +8 | +9 | +10 | +11 | +12 | +13 | +14 | +15 |
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
      | 0 | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11  | 12  | 13  | 14  | 15  | 16  |
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
            
      Stack
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
      |   | +0 | +1 | +2 | +3 | +4 | +5 | +6 | +7 | +8 | +9 | +10 | +11 | +12 | +13 | +14 | +15 |
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
      | 0 | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11  | 12  | 13  | 14  | 15  | 16  |
      +---+----+----+----+----+----+----+----+----+----+----+-----+-----+-----+-----+-----+-----+
            
      instruction pointer: 20
      stack pointer: 15
      counter register: 10
      is running: true""";

  @Test
  public void buildDashboard() {
    String table = Output.buildDashboard(
        instructions,
        data,
        stack,
        counterReg,
        stackPtr,
        instructionPtr,
        running
    );

    assertEquals(expected, table);
  }
}